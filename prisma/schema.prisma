// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model TrademarkApplication {
  id                String   @id @default(cuid())
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
  
  // Application Progress
  currentStep       Int      @default(1) // 1, 2, 3
  status            String   @default("draft") // "draft", "submitted", "under_review", "approved", "rejected", "completed"
  
  // Step 1: Trademark Information
  trademarkName     String?
  slogan            String?
  description       String?
  trademarkType     String?  // "word", "logo", "combined"
  logoFile          String?  // File path or URL
  internationalClass String?
  useInCommerce     String?  // "intent", "current"
  firstUseDate      DateTime?
  commerceUseDate   DateTime?
  disclaimerText    String?
  translationRequired Boolean @default(false)
  translationText   String?
  significanceExplanation String?
  businessEntityType String?
  searchPerformed   Boolean @default(false)
  conflictsFound    Boolean @default(false)
  
  // Step 2: Applicant Information
  applicantType     String?  // "individual", "organization"
  
  // Individual fields
  firstName         String?
  lastName          String?
  email             String?
  phone             String?
  address           String?
  city              String?
  state             String?
  zipCode           String?
  country           String?
  citizenshipCountry String?
  domiciledInUS     Boolean @default(true)
  
  // Organization fields
  organizationName  String?
  organizationType  String?
  contactPerson     String?
  organizationEmail String?
  organizationPhone String?
  organizationAddress String?
  organizationCity  String?
  organizationState String?
  organizationZipCode String?
  organizationCountry String?
  businessFormationState String?
  taxId             String?
  
  // Attorney Information
  attorneyDesignation String? // "yes", "no"
  attorneyName      String?
  attorneyEmail     String?
  attorneyPhone     String?
  
  // Communication Preferences
  correspondencePreference String? // "email", "mail"
  signatureMethod   String? // "electronic", "handwritten"
  emergencyContact  String?
  emergencyPhone    String?
  
  // Step 3: Package Selection & Payment
  packageType       String?  // "basic", "standard", "premium"
  packagePrice      Decimal?
  governmentFee     Decimal?
  discount          Decimal? @default(0)
  promoCode         String?
  totalAmount       Decimal?
  
  // Payment Information
  paymentStatus     String   @default("pending") // "pending", "processing", "completed", "failed"
  paymentId         String?  // Stripe payment ID
  paymentMethod     String?  // "stripe", "paypal"
  paymentIntentId   String?  // Stripe payment intent
  
  // Application Processing
  submissionDate    DateTime?
  usto_applicationNumber String? @unique
  notes             String?
  
  @@map("trademark_applications")
}

model Admin {
  id        String   @id @default(cuid())
  email     String   @unique
  password  String   // This will be hashed
  name      String
  role      String   @default("admin")
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  @@map("admins")
}
